# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Данные и типы данных, используемые в приложение

Интерфейс структуры данных элемента - карточки

```
export interface ICard{
    id: string;
    description: string;
    image: string;
    title: string;
    category: string;
    price: number | null;
}
```

Интерфейс структуры данных элемента - корзины

```
export IBasketItem {
    id: string;
    quantity: number;
    price: number;
}
```

## Архитектура приложения

Код приложения разделен на слои согласно парадигме MVP: 
- слой представления, отвечает за отображение данных на странице, 
- слой данных, отвечает за хранение и изменение данных
- презентер, отвечает за связь представления и данных.

### Базовый код

#### Класс Api
Содержит в себе базовую логику отправки запросов. В конструктор передается базовый адрес сервера и опциональный объект с заголовками запросов.
Методы: 
- `get` - выполняет GET запрос на переданный в параметрах ендпоинт и возвращает промис с объектом, которым ответил сервер
- `post` - принимает объект с данными, которые будут переданы в JSON в теле запроса, и отправляет эти данные на ендпоинт переданный как параметр при вызове метода. По умолчанию выполняется `POST` запрос, но метод запроса может быть переопределен заданием третьего параметра при вызове.

#### Класс EventEmitter
Брокер событий позволяет отправлять события и подписываться на события, происходящие в системе. Класс используется в презентере для обработки событий и в слоях приложения для генерации событий.  
Основные методы, реализуемые классом описаны интерфейсом `IEvents`:
- `on` - подписка на событие
- `emit` - инициализация события
- `trigger` - возвращает функцию, при вызове которой инициализируется требуемое в параметрах событие   

### Модели данных

#### Класс CardModel
Отвечает за управление коллекцией карточек товаров и их состоянием.

Свойства:\
    `cards: ICard[];` - Массив карточек.\
    `selectedCard: ICard | null;` - выбранная карточка для отображения в попопе.

Методы:\
    `getCards(): ICard[];` - Метод класаа для получения карточек.\
    `initializeCards(cards: ICard[]): void;` - Метод класса для инициализации карточек.\
    `selectCard(cardId: string): void;` метод класса для увеличенного отображения карточки.

#### Класс BasketModal
Управляет данными корзины покупок, такими как добавление и удаление товаров, а также расчет общей стоимости.

Свойства:\
    `baskteItems: IBasketItem[];` - Массим карточек, добавленных в корзину.\
    `totalPrice: number;` - Общая стоимость товаров в корине.

Методы:\
    `addItem(item: ICard): void` — Добавляет товар в корзину.\
    `removeItem(itemId: string): void` — Удаляет товар из корзины.\
    `printTotalPrice(): number` — Рассчитывает общую стоимость товаров в корзине.

### Компоненты представления

#### Базовый класс ViewComponent
Является базовым классом для всех остальных компонентов представления.Проедоставляет обзщие свойства и методы.

Свойства:\
    `template: HTMLTemplateElement | null;` - Шаблон элемента, который будет использован для создания элемента.\
    `element: HTMLElement | null;` - элемент, созданный на основе шаблона.

Методы:\
    `render(container: HTMLElement): void` - Отображает элемент в заданном контейнере.\
    `setTemplate(templateId: string): void` - Устанавливает шаблон для компонента, используя ID шаблона в HTML.\    
    `update<T>(data: T): void` - Абстрактный метод для обновления данных в компоненте.

#### Класс CardView
Расширяет класс ViewComponent. Управляет отображением карточки товара в каталоге или карточка в попапе.

Свойства:

`card: ICard` - объект карточки товара, содержащий данные для отображения.

Конструктор:\
`constructor(card: ICard, templateId: string)` Конструктор, принимает данные карточки и ID шаблона.

Методы:\
`update(card: ICard): void` Обновляет данные карточки и перерисовывает её в соответствии с новыми данными.\
`render(container: HTMLElement): void` Отображает карточку в указанном контейнере.

#### Класс PopupView
Расширяет класс ViewComponent. Управляет отображением модальных окон на странице.

Свойства:

`items: IBasketItem[]` - элемент, который будет отображаться внутри попапа.

Конструктор:\
`constructor(templateId: string)` Конструктор, устанавливает шаблон для попапа.

Методы:\
`setContent(content: HTMLElement): void` Отображает попап на экране.\
`show(): void` Отображает попап на экране.\
`hide(): void` Скрывает попап с экрана.

#### Класс BasketView
Расширяет класс ViewComponent. Отвечает за отображение корзины и управление списком товаров.

Свойства:

`content: HTMLElement` - элемент, который будет отображаться внутри попапа.

Конструктор:\
`constructor(items: IBasketItem[], templateId: string)` Конструктор, принимает данные корзины и ID шаблона.

Методы:\
`update(items: IBasketItem[]): void` Обновляет данные корзины и перерисовывает её содержимое.\
`render(container: HTMLElement): void` ООтображает корзину в указанном контейнере.

### Определение событий



## Взаимодействие компонентов

...
