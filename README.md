# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура приложения
Код приложения разделен на слои согласно парадигме MVP (Model-View-Presenter):

Model - слой данных, отвечает за хранение и изменение данных.

View - слой представления, отвечает за отображение данных на странице.

EventEmitter выступает в роли Представителя (Presenter).

## Базовый код

### Класс `Api`
Содержит в себе базовую логику отправки запросов. В конструктор передается базовый адрес сервера и опциональный объект с заголовками запросов.
Методы: 
- `get` - выполняет GET запрос на переданный в параметрах ендпоинт и возвращает промис с объектом, которым ответил сервер.
- `post` - принимает объект с данными, которые будут переданы в JSON в теле запроса, и отправляет эти данные на ендпоинт переданный как параметр при вызове метода. По умолчанию выполняется `POST` запрос, но метод запроса может быть переопределен заданием третьего параметра при вызове.

### Класс `EventEmitter` реализует интерфейс IEvents и имеет следующие методы
Брокер событий позволяет отправлять события и подписываться на события, происходящие в системе. Класс используется в презентере для обработки событий и в слоях приложения для генерации событий.  
Основные методы, реализуемые классом описаны интерфейсом `IEvents`:
- `on` - подписка на событие.
- `off` - отписка от события.
- `onAll` - подписка на все событие.
- `offAll` - отписка от всех событий.
- `emit` - инициализация события.
- `trigger` - возвращает функцию, при вызове которой инициализируется требуемое в параметрах событие   .

## Модели данных

### Класс `ModelData` наследуется от класса `Api` получает и передает данные с сервера

Методы:

- `getListCards` - получаем массив карточек с сервера.
- `submitOrder` - отправляем данные на сервер.

### Класс `ModelBasket` управляет данными корзины покупок

Методы:

- `getCountItems` - возвращает колличество товаров в корзине.
- `getTotalPrice` - возвращает общую стоимость товаров в корзине.
- `addNewItem` - добавляет товар в корзину.
- `removeItem` - удаляет товар из корзины.
- `clearBasket` - очищает корзину.

### Класс `ModelCard` принимает и хранит данные карточек полученные с сервера

Методы:

- `setProductPreview` - сохраняет данные выбранной карточки.

### Класс `ModelForm` управляет валидацией и данными о покупателе

Методы:

- `setOrderAddress` - принимает адресс покупателя.
- `validateOrder` - проверяет адрес и способ оплаты.
- `setOrderData` - принимает почту и номер телефона.
- `validateContacts` - проверяет почту и номер телефона.
- `getOrderData` - возвращает данные пользователя с его товарами.

## Компоненты представления

### Класс `Basket` управляет отображение данных в корзине

Методы:

- `BasketCounter` - сохраняет и меняет колличество товаров в корзине.
- `BasketTotalPrice` - сохраняет и меняет итоговую сумму.

### Класс `BasketItem` управляет отображением товаров в корзине.

Методы:

- `setPriceItem` - принимает цену в числовом виде и возвращает в строчном виде.

### Класс `Card` управляет переопределением типа данных у товаров в корзине.

Методы:

- `setText` - принимает два значения: первое — HTMLElement, второе — текстовое содержимое HTMLElement.
- `CardCategory` - принимает строчное значение и создаёт новый className для HTMLElement.
- `setPriceItem` - Принимает цену в числовом виде и возвращает в строчном виде.

### Класс `CardPreviewModal` наследуется от класса Card и управляет отображением подробного описания карточки товара в превью. Дает возможность добавления карточки в корзину

Методы:

- `noPrice` - принимает данные продукты, проверяет на наличие цены, если ее нет — блокирует покупку.

### Класс `Order` управляет отображением содержимого модального окна и позволяет принять от пользователя метод оплаты и адрес.

Методы:

- `PaymentMethodSelection` - применяет обводку к выбранному способу оплаты.

### Класс `Contacts` управляет отображением содержимого модального окна и позволяет принять от пользователя номер телефона и Email.

### Класс `Modal` управляет отображением модальных окон.

Методы:

- `open` - отображает модальное окно.
- `close` - закрывает модальное окно.

### Класс `SuccessfulOrder` управляет отображением успешного заказа в модальном окне.